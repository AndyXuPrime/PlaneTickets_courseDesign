{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\n// 导入核心页面组件\nimport HomeView from '../views/HomeView.vue';\nVue.use(VueRouter);\nconst routes = [\n// 1. 首页 (航班查询)\n{\n  path: '/',\n  name: 'Home',\n  // 命名为 Home 更清晰\n  component: HomeView,\n  meta: {\n    title: '航班查询'\n  } // meta 信息，用于设置页面标题等\n},\n// 3. 订单确认/预订页面\n{\n  path: '/booking',\n  name: 'Booking',\n  component: () => import(/* webpackChunkName: \"booking\" */'../views/BookingView.vue'),\n  meta: {\n    title: '订单确认',\n    requiresAuth: true // 添加一个标志，表示这个页面需要登录才能访问\n  }\n},\n// 4. 我的订单列表页\n{\n  path: '/orders',\n  name: 'MyOrders',\n  component: () => import(/* webpackChunkName: \"my-orders\" */'../views/MyTicketsView.vue'),\n  meta: {\n    title: '我的订单',\n    requiresAuth: true\n  }\n},\n// 5. 订单详情页 (使用动态路由参数 :orderId)\n{\n  path: '/orders/:orderId',\n  // :orderId 是一个动态参数\n  name: 'OrderDetail',\n  component: () => import(/* webpackChunkName: \"order-detail\" */'../views/OrderDetailView.vue'),\n  props: true,\n  // 将路由参数作为 props 传递给组件，方便组件获取 orderId\n  meta: {\n    title: '订单详情',\n    requiresAuth: true\n  }\n},\n// 6. 会员中心/个人资料页\n{\n  path: '/profile',\n  name: 'Profile',\n  component: () => import(/* webpackChunkName: \"profile\" */'../views/ProfileView.vue'),\n  meta: {\n    title: '会员中心',\n    requiresAuth: true\n  }\n},\n// 7. 客户服务/帮助中心\n{\n  path: '/service',\n  name: 'CustomerService',\n  component: () => import(/* webpackChunkName: \"service\" */'../views/CustomerServiceView.vue'),\n  meta: {\n    title: '客户服务'\n  }\n},\n// 8. 关于我们页面 (保留)\n{\n  path: '/about',\n  name: 'About',\n  component: () => import(/* webpackChunkName: \"about\" */'../views/AboutView.vue'),\n  meta: {\n    title: '关于我们'\n  }\n}, {\n  path: '/flights',\n  name: 'FlightStatus',\n  // 将原有的 FlightResults 改为 FlightStatus 更贴切\n  component: () => import(/* webpackChunkName: \"flight-status\" */'../views/FlightStatusView.vue'),\n  meta: {\n    title: '航班动态'\n  }\n}, {\n  path: '/admin',\n  name: 'Admin',\n  component: () => import(/* webpackChunkName: \"admin\" */'../views/AdminView.vue'),\n  meta: {\n    title: '后台管理',\n    requiresAuth: true,\n    // 需要登录\n    requiresAdmin: true // 自定义元信息，用于路由守卫判断角色\n  }\n},\n// 9. (可选) 404 页面\n{\n  path: '*',\n  name: 'NotFound',\n  component: () => import(/* webpackChunkName: \"not-found\" */'../views/NotFoundView.vue'),\n  meta: {\n    title: '页面未找到'\n  }\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  // 使用 History 模式，URL 更美观 (需要后端支持)\n  base: process.env.BASE_URL,\n  routes,\n  // 每次切换路由时，都滚动到页面顶部\n  scrollBehavior(to, from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition;\n    } else {\n      // 如果没有查询参数，则滚动到顶部\n      if (to.query.section) {\n        return {}; // 返回空对象，让我们的自定义逻辑处理滚动\n      }\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n  }\n});\n\n// --- 全局路由守卫 (Navigation Guard) ---\n// 这是实现“需要登录才能访问”功能的关键\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('authToken');\n  const user = JSON.parse(localStorage.getItem('user')); // 假设用户信息（含角色）已存入storage\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      // 未登录，处理逻辑\n    } else {\n      // 已登录，检查是否需要管理员权限\n      if (to.matched.some(record => record.meta.requiresAdmin)) {\n        if (user && user.roles.includes('ADMIN')) {\n          // 假设用户对象中有 roles 数组\n          next();\n        } else {\n          // 无权限，可以重定向到无权限页面或首页\n          next({\n            name: 'Home'\n          });\n        }\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n\n  // 设置页面标题\n  if (to.meta.title) {\n    document.title = `${to.meta.title} - 蓝天航空`;\n  } else {\n    document.title = '蓝天航空';\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","HomeView","use","routes","path","name","component","meta","title","requiresAuth","props","requiresAdmin","router","mode","base","process","env","BASE_URL","scrollBehavior","to","from","savedPosition","query","section","x","y","beforeEach","next","token","localStorage","getItem","user","JSON","parse","matched","some","record","roles","includes","document"],"sources":["D:/LearnSomeComputerPrograms VSCode/AndyJava/PlaneTickets_courseDesign-main/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\n// 导入核心页面组件\nimport HomeView from '../views/HomeView.vue';\n\nVue.use(VueRouter);\n\nconst routes = [\n  // 1. 首页 (航班查询)\n  {\n    path: '/',\n    name: 'Home', // 命名为 Home 更清晰\n    component: HomeView,\n    meta: { title: '航班查询' } // meta 信息，用于设置页面标题等\n  },\n\n\n\n  // 3. 订单确认/预订页面\n  {\n    path: '/booking',\n    name: 'Booking',\n    component: () => import(/* webpackChunkName: \"booking\" */ '../views/BookingView.vue'),\n    meta: {\n      title: '订单确认',\n      requiresAuth: true // 添加一个标志，表示这个页面需要登录才能访问\n    }\n  },\n\n  // 4. 我的订单列表页\n  {\n    path: '/orders',\n    name: 'MyOrders',\n    component: () => import(/* webpackChunkName: \"my-orders\" */ '../views/MyTicketsView.vue'),\n    meta: {\n      title: '我的订单',\n      requiresAuth: true\n    }\n  },\n\n  // 5. 订单详情页 (使用动态路由参数 :orderId)\n  {\n    path: '/orders/:orderId', // :orderId 是一个动态参数\n    name: 'OrderDetail',\n    component: () => import(/* webpackChunkName: \"order-detail\" */ '../views/OrderDetailView.vue'),\n    props: true, // 将路由参数作为 props 传递给组件，方便组件获取 orderId\n    meta: {\n      title: '订单详情',\n      requiresAuth: true\n    }\n  },\n\n  // 6. 会员中心/个人资料页\n  {\n    path: '/profile',\n    name: 'Profile',\n    component: () => import(/* webpackChunkName: \"profile\" */ '../views/ProfileView.vue'),\n    meta: {\n      title: '会员中心',\n      requiresAuth: true\n    }\n  },\n\n  // 7. 客户服务/帮助中心\n  {\n    path: '/service',\n    name: 'CustomerService',\n    component: () => import(/* webpackChunkName: \"service\" */ '../views/CustomerServiceView.vue'),\n    meta: { title: '客户服务' }\n  },\n\n  // 8. 关于我们页面 (保留)\n  {\n    path: '/about',\n    name: 'About',\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue'),\n    meta: { title: '关于我们' }\n  },\n  {\n    path: '/flights',\n    name: 'FlightStatus', // 将原有的 FlightResults 改为 FlightStatus 更贴切\n    component: () => import(/* webpackChunkName: \"flight-status\" */ '../views/FlightStatusView.vue'),\n    meta: { title: '航班动态' }\n  },\n  {\n    path: '/admin',\n    name: 'Admin',\n    component: () => import(/* webpackChunkName: \"admin\" */ '../views/AdminView.vue'),\n    meta: {\n      title: '后台管理',\n      requiresAuth: true, // 需要登录\n      requiresAdmin: true // 自定义元信息，用于路由守卫判断角色\n    }\n  },\n  // 9. (可选) 404 页面\n  {\n    path: '*',\n    name: 'NotFound',\n    component: () => import(/* webpackChunkName: \"not-found\" */ '../views/NotFoundView.vue'),\n    meta: { title: '页面未找到' }\n  }\n];\n\nconst router = new VueRouter({\n  mode: 'history', // 使用 History 模式，URL 更美观 (需要后端支持)\n  base: process.env.BASE_URL,\n  routes,\n  // 每次切换路由时，都滚动到页面顶部\n  scrollBehavior(to, from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition;\n    } else {\n      // 如果没有查询参数，则滚动到顶部\n      if (to.query.section) {\n        return {}; // 返回空对象，让我们的自定义逻辑处理滚动\n      }\n      return { x: 0, y: 0 };\n    }\n  }\n});\n\n// --- 全局路由守卫 (Navigation Guard) ---\n// 这是实现“需要登录才能访问”功能的关键\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('authToken');\n  const user = JSON.parse(localStorage.getItem('user')); // 假设用户信息（含角色）已存入storage\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      // 未登录，处理逻辑\n    } else {\n      // 已登录，检查是否需要管理员权限\n      if (to.matched.some(record => record.meta.requiresAdmin)) {\n        if (user && user.roles.includes('ADMIN')) { // 假设用户对象中有 roles 数组\n          next();\n        } else {\n          // 无权限，可以重定向到无权限页面或首页\n          next({ name: 'Home' });\n        }\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n\n  // 设置页面标题\n  if (to.meta.title) {\n    document.title = `${to.meta.title} - 蓝天航空`;\n  } else {\n    document.title = '蓝天航空';\n  }\n});\n\n\nexport default router;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}