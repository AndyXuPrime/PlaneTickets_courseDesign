{"ast":null,"code":"import { store, mutations } from '../store';\nexport default {\n  name: 'FlightList',\n  props: {\n    flights: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    searchDate: {\n      type: String,\n      required: true\n    }\n  },\n  methods: {\n    /**\n     * 【核心】处理预订按钮点击事件\n     * @param {object} flight - 被点击的航班对象\n     */\n    bookFlight(flight) {\n      // 1. 检查用户是否登录\n      if (!store.isLoggedIn) {\n        this.$message.warning('请先登录再进行预订！');\n        mutations.setShowLoginModal(true);\n        return;\n      }\n\n      // 2. 检查必要的日期信息是否存在\n      if (!this.searchDate) {\n        this.$message.error('缺少航班日期，无法预订。请返回首页重新搜索。');\n        return;\n      }\n\n      // 3. 用户已登录，执行跳转，并传递完整数据\n      this.$router.push({\n        name: 'Booking',\n        // 使用路由名称跳转\n        query: {\n          // 将完整的 flight 对象转换为 JSON 字符串进行传递\n          flight: JSON.stringify(flight),\n          // 将搜索日期也一并传递过去\n          flightDate: this.searchDate\n        }\n      });\n    },\n    getAirlineShortName(name) {\n      if (!name) return '航司';\n      if (name.includes('国际')) return '国航';\n      if (name.includes('东方')) return '东航';\n      if (name.includes('南方')) return '南航';\n      if (name.includes('海南')) return '海航';\n      if (name.includes('四川')) return '川航';\n      if (name.includes('厦门')) return '厦航';\n      return name.substring(0, 2);\n    },\n    getCabinClassBadge(cabinClass) {\n      if (cabinClass === '商务舱') return 'badge-gold';\n      return 'badge-info';\n    }\n  }\n};","map":{"version":3,"names":["store","mutations","name","props","flights","type","Array","required","default","searchDate","String","methods","bookFlight","flight","isLoggedIn","$message","warning","setShowLoginModal","error","$router","push","query","JSON","stringify","flightDate","getAirlineShortName","includes","substring","getCabinClassBadge","cabinClass"],"sources":["src/components/FlightList.vue"],"sourcesContent":["<template>\n  <div class=\"flight-list\">\n    <div v-if=\"!flights || flights.length === 0\" class=\"no-flights-placeholder\">\n      <p>暂无航班信息</p>\n    </div>\n    \n    <div v-else>\n      <div v-for=\"flight in flights\" :key=\"flight.flightNumber + flight.cabinClassForDisplay\" class=\"flight-item\">\n        <!-- 航空公司信息 -->\n        <div class=\"airline-info\">\n          <div class=\"airline-logo\">{{ getAirlineShortName(flight.airlineName) }}</div>\n          <div class=\"airline-name\">{{ flight.airlineName }}</div>\n          <div class=\"flight-details\">{{ flight.flightNumber }}</div>\n        </div>\n\n        <!-- 航线和时间信息 -->\n        <div class=\"flight-route\">\n          <div class=\"departure\">\n            <div class=\"flight-time\">{{ flight.departureTime }}</div>\n            <div class=\"airport-name\">{{ flight.departureAirport }}</div>\n          </div>\n          <div class=\"route-arrow\">\n            <i class=\"el-icon-right\"></i>\n          </div>\n          <div class=\"arrival\">\n            <div class=\"flight-time\">{{ flight.arrivalTime }}</div>\n            <div class=\"airport-name\">{{ flight.arrivalAirport }}</div>\n          </div>\n        </div>\n\n        <!-- 价格和舱位信息 -->\n        <div class=\"price-section\">\n          <div class=\"flight-price\">\n            ¥<span>{{ flight.price }}</span>\n          </div>\n          <div class=\"flight-details\">\n            <span class=\"badge\" :class=\"getCabinClassBadge(flight.cabinClassForDisplay)\">\n              {{ flight.cabinClassForDisplay }}\n            </span>\n            | 剩余: {{ flight.remainingSeats }}\n          </div>\n        </div>\n\n        <!-- 操作区 -->\n        <div class=\"action-section\">\n          <button class=\"btn btn-book\" @click=\"bookFlight(flight)\" :disabled=\"flight.remainingSeats === 0\">\n            {{ flight.remainingSeats > 0 ? '预订' : '无票' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { store, mutations } from '../store';\n\nexport default {\n  name: 'FlightList',\n  props: {\n    flights: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    searchDate: { \n      type: String,\n      required: true,\n    }\n  },\n  methods: {\n    /**\n     * 【核心】处理预订按钮点击事件\n     * @param {object} flight - 被点击的航班对象\n     */\n    bookFlight(flight) {\n      // 1. 检查用户是否登录\n      if (!store.isLoggedIn) {\n        this.$message.warning('请先登录再进行预订！');\n        mutations.setShowLoginModal(true);\n        return;\n      }\n\n      // 2. 检查必要的日期信息是否存在\n      if (!this.searchDate) {\n        this.$message.error('缺少航班日期，无法预订。请返回首页重新搜索。');\n        return;\n      }\n\n      // 3. 用户已登录，执行跳转，并传递完整数据\n      this.$router.push({\n        name: 'Booking', // 使用路由名称跳转\n        query: {\n          // 将完整的 flight 对象转换为 JSON 字符串进行传递\n          flight: JSON.stringify(flight),\n          // 将搜索日期也一并传递过去\n          flightDate: this.searchDate\n        }\n      });\n    },\n    \n    getAirlineShortName(name) {\n      if (!name) return '航司';\n      if (name.includes('国际')) return '国航';\n      if (name.includes('东方')) return '东航';\n      if (name.includes('南方')) return '南航';\n      if (name.includes('海南')) return '海航';\n      if (name.includes('四川')) return '川航';\n      if (name.includes('厦门')) return '厦航';\n      return name.substring(0, 2);\n    },\n    \n    getCabinClassBadge(cabinClass) {\n      if (cabinClass === '商务舱') return 'badge-gold';\n      return 'badge-info';\n    },\n  }\n};\n</script>\n\n<style scoped>\n/* 样式部分保持不变 */\n.no-flights-placeholder {\n  text-align: center;\n  padding: 50px;\n  color: #888;\n}\n.flight-item {\n  display: grid; /* 确保你的CSS中有grid布局 */\n  grid-template-columns: 150px 1fr 180px 120px;\n  align-items: center;\n  gap: 20px;\n  padding: 15px;\n  margin-bottom: 15px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n  border-left: 4px solid transparent;\n  transition: all 0.3s ease;\n}\n.flight-item:hover {\n  border-left-color: #409EFF;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n}\n.airline-info { text-align: center; }\n.airline-logo { \n  width: 50px; height: 50px;\n  line-height: 50px;\n  margin: 0 auto 8px; \n  border-radius: 50%;\n  font-size: 16px;\n  background-color: #e3f2fd;\n  color: #409EFF;\n  font-weight: bold;\n}\n.airline-name { font-weight: 500; font-size: 14px; }\n.flight-details { font-size: 13px; color: #909399; }\n.flight-route { display: flex; align-items: center; justify-content: center; }\n.departure, .arrival { text-align: center; }\n.flight-time { font-size: 22px; font-weight: 500; color: #303133; }\n.airport-name { font-size: 14px; color: #606266; }\n.route-arrow { font-size: 24px; color: #DCDFE6; margin: 0 20px; }\n.price-section { text-align: right; }\n.price-section .flight-price {\n    color: #F56C6C; \n    font-size: 18px;\n}\n.price-section .flight-price span { font-size: 28px; font-weight: bold; }\n.price-section .flight-details { margin-top: 5px; }\n.badge {\n  padding: 3px 8px;\n  border-radius: 10px;\n  color: #fff;\n  font-size: 12px;\n}\n.badge-info { background-color: #909399; }\n.badge-gold { background-color: #E6A23C; }\n.action-section { display: flex; align-items: center; justify-content: center; }\n.btn-book {\n  padding: 8px 25px;\n  border: none;\n  background-color: #409EFF;\n  color: white;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n.btn-book:hover { background-color: #66b1ff; }\n.btn-book:disabled {\n  background-color: #c0c4cc;\n  cursor: not-allowed;\n}\n</style>"],"mappings":"AAuDA,SAAAA,KAAA,EAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,QAAA;MACAC,OAAA,EAAAA,CAAA;IACA;IACAC,UAAA;MACAJ,IAAA,EAAAK,MAAA;MACAH,QAAA;IACA;EACA;EACAI,OAAA;IACA;AACA;AACA;AACA;IACAC,WAAAC,MAAA;MACA;MACA,KAAAb,KAAA,CAAAc,UAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACAf,SAAA,CAAAgB,iBAAA;QACA;MACA;;MAEA;MACA,UAAAR,UAAA;QACA,KAAAM,QAAA,CAAAG,KAAA;QACA;MACA;;MAEA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAlB,IAAA;QAAA;QACAmB,KAAA;UACA;UACAR,MAAA,EAAAS,IAAA,CAAAC,SAAA,CAAAV,MAAA;UACA;UACAW,UAAA,OAAAf;QACA;MACA;IACA;IAEAgB,oBAAAvB,IAAA;MACA,KAAAA,IAAA;MACA,IAAAA,IAAA,CAAAwB,QAAA;MACA,IAAAxB,IAAA,CAAAwB,QAAA;MACA,IAAAxB,IAAA,CAAAwB,QAAA;MACA,IAAAxB,IAAA,CAAAwB,QAAA;MACA,IAAAxB,IAAA,CAAAwB,QAAA;MACA,IAAAxB,IAAA,CAAAwB,QAAA;MACA,OAAAxB,IAAA,CAAAyB,SAAA;IACA;IAEAC,mBAAAC,UAAA;MACA,IAAAA,UAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}