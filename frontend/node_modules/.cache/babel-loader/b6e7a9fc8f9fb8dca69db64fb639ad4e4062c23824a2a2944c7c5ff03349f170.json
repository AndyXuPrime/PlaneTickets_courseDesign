{"ast":null,"code":"import AppHeader from './components/AppHeader.vue';\nimport AppFooter from './components/AppFooter.vue';\nimport LoginModal from './components/LoginModal.vue';\nimport RegisterModal from './components/RegisterModal.vue';\nimport { store, mutations } from './store';\nexport default {\n  name: 'App',\n  components: {\n    AppHeader,\n    AppFooter,\n    LoginModal,\n    RegisterModal\n  },\n  computed: {\n    state() {\n      return store;\n    }\n  },\n  created() {\n    mutations.loadUserFromStorage();\n  },\n  methods: {\n    showLogin(value = true) {\n      mutations.setShowLoginModal(value);\n    },\n    showRegister(value = true) {\n      mutations.setShowRegisterModal(value);\n    },\n    closeModals() {\n      mutations.setShowLoginModal(false);\n      mutations.setShowRegisterModal(false);\n    },\n    onLoginSuccess(loginData) {\n      const userData = {\n        username: loginData.username,\n        // 手机号\n        name: loginData.name,\n        level: loginData.membershipLevel\n      };\n      mutations.setUser(userData, loginData.token);\n      this.closeModals();\n      this.$message.success('登录成功!');\n      this.$router.go(0);\n    },\n    handleLogout() {\n      mutations.clearUser();\n      this.$message.info('您已退出登录。');\n      if (this.$route.meta.requiresAuth) {\n        this.$router.push('/');\n      }\n    }\n  }\n};","map":{"version":3,"names":["AppHeader","AppFooter","LoginModal","RegisterModal","store","mutations","name","components","computed","state","created","loadUserFromStorage","methods","showLogin","value","setShowLoginModal","showRegister","setShowRegisterModal","closeModals","onLoginSuccess","loginData","userData","username","level","membershipLevel","setUser","token","$message","success","$router","go","handleLogout","clearUser","info","$route","meta","requiresAuth","push"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <app-header :is-logged-in=\"state.isLoggedIn\" :user=\"state.user\" @logout=\"handleLogout\" @show-login=\"showLogin\" @show-register=\"showRegister\" />\n    <main class=\"main-content\">\n      <div class=\"container\">\n        <router-view></router-view>\n      </div>\n    </main>\n    <app-footer />\n\n    <login-modal v-if=\"state.showLoginModal\" @close=\"closeModals\" @login-success=\"onLoginSuccess\" @switch-to-register=\"showRegister(true)\" />\n    <register-modal v-if=\"state.showRegisterModal\" @close=\"closeModals\" @switch-to-login=\"showLogin(true)\" />\n  </div>\n</template>\n\n<script>\nimport AppHeader from './components/AppHeader.vue';\nimport AppFooter from './components/AppFooter.vue';\nimport LoginModal from './components/LoginModal.vue';\nimport RegisterModal from './components/RegisterModal.vue';\nimport { store, mutations } from './store';\n\n\nexport default {\n  name: 'App',\n  components: { AppHeader, AppFooter, LoginModal, RegisterModal },\n  computed: {\n    state() {\n      return store;\n    }\n  },\n  created() {\n    mutations.loadUserFromStorage();\n  },\n  methods: {\n    showLogin(value = true) {\n      mutations.setShowLoginModal(value);\n    },\n    showRegister(value = true) {\n      mutations.setShowRegisterModal(value);\n    },\n    closeModals() {\n      mutations.setShowLoginModal(false);\n      mutations.setShowRegisterModal(false);\n    },\n    onLoginSuccess(loginData) {\n      \n      const userData = {\n        username: loginData.username, // 手机号\n        name: loginData.name,\n        level: loginData.membershipLevel,\n      };\n      \n      mutations.setUser(userData, loginData.token);\n      this.closeModals();\n      this.$message.success('登录成功!');\n      this.$router.go(0);\n    },\n    handleLogout() {\n      mutations.clearUser();\n      this.$message.info('您已退出登录。');\n      if (this.$route.meta.requiresAuth) {\n        this.$router.push('/');\n      }\n    }\n  }\n};\n</script>"],"mappings":"AAgBA,OAAAA,SAAA;AACA,OAAAC,SAAA;AACA,OAAAC,UAAA;AACA,OAAAC,aAAA;AACA,SAAAC,KAAA,EAAAC,SAAA;AAGA;EACAC,IAAA;EACAC,UAAA;IAAAP,SAAA;IAAAC,SAAA;IAAAC,UAAA;IAAAC;EAAA;EACAK,QAAA;IACAC,MAAA;MACA,OAAAL,KAAA;IACA;EACA;EACAM,QAAA;IACAL,SAAA,CAAAM,mBAAA;EACA;EACAC,OAAA;IACAC,UAAAC,KAAA;MACAT,SAAA,CAAAU,iBAAA,CAAAD,KAAA;IACA;IACAE,aAAAF,KAAA;MACAT,SAAA,CAAAY,oBAAA,CAAAH,KAAA;IACA;IACAI,YAAA;MACAb,SAAA,CAAAU,iBAAA;MACAV,SAAA,CAAAY,oBAAA;IACA;IACAE,eAAAC,SAAA;MAEA,MAAAC,QAAA;QACAC,QAAA,EAAAF,SAAA,CAAAE,QAAA;QAAA;QACAhB,IAAA,EAAAc,SAAA,CAAAd,IAAA;QACAiB,KAAA,EAAAH,SAAA,CAAAI;MACA;MAEAnB,SAAA,CAAAoB,OAAA,CAAAJ,QAAA,EAAAD,SAAA,CAAAM,KAAA;MACA,KAAAR,WAAA;MACA,KAAAS,QAAA,CAAAC,OAAA;MACA,KAAAC,OAAA,CAAAC,EAAA;IACA;IACAC,aAAA;MACA1B,SAAA,CAAA2B,SAAA;MACA,KAAAL,QAAA,CAAAM,IAAA;MACA,SAAAC,MAAA,CAAAC,IAAA,CAAAC,YAAA;QACA,KAAAP,OAAA,CAAAQ,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}